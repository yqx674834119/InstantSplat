# InstantSplat 项目安装记录

**日期**: 2025-09-07  
**任务**: 根据README文档安装InstantSplat项目

## 安装步骤记录

### 1. 项目准备
- ✅ 项目已存在于 `/home/livablecity/InstantSplat`
- ✅ 创建 `mast3r/checkpoints/` 目录
- 🔄 下载预训练模型 `MASt3R_ViTLarge_BaseDecoder_512_catmlpdpt_metric.pth` (2.6G，正在进行中)

### 2. 环境配置
- ✅ 创建conda环境: `conda create -n instantsplat python=3.10.13 cmake=3.14.0 -y`
- ✅ 激活环境: `conda activate instantsplat`

### 3. 依赖安装
- ✅ 安装PyTorch (CUDA 11.8版本): `conda install pytorch torchvision pytorch-cuda=11.8 -c pytorch -c nvidia -y`
  - 注意: 初始安装了CUDA 12.1版本，但系统CUDA版本为11.8，导致编译错误，已重新安装匹配版本
- ✅ 安装requirements.txt依赖: `pip install -r requirements.txt`

### 4. 子模块安装
- ✅ 初始化git子模块: `git submodule update --init --recursive`
- ✅ 安装simple-knn: `pip install submodules/simple-knn`
- ✅ 安装diff-gaussian-rasterization: `pip install submodules/diff-gaussian-rasterization`
- ✅ 安装fused-ssim: `pip install submodules/fused-ssim`

### 5. CUDA内核编译
- ✅ 编译RoPE CUDA内核: `cd croco/models/curope/ && python setup.py build_ext --inplace`
  - 编译成功，有一些deprecation警告但不影响功能

## 重要修改和注意事项

### CUDA版本兼容性问题
- **问题**: 系统CUDA版本(11.8)与PyTorch编译版本(12.1)不匹配
- **解决方案**: 重新安装PyTorch CUDA 11.8版本
- **命令**: `conda install pytorch torchvision pytorch-cuda=11.8 -c pytorch -c nvidia -y`

### 子模块初始化
- **问题**: 子模块目录为空，无法直接安装
- **解决方案**: 使用 `git submodule update --init --recursive` 初始化所有子模块

## 安装状态

- ✅ conda环境创建和激活
- ✅ PyTorch和相关依赖安装
- ✅ requirements.txt依赖安装
- ✅ 所有子模块依赖安装
- ✅ CUDA内核编译
- 🔄 预训练模型下载 (进行中)

## 下一步

- ✅ 等待预训练模型下载完成
- ✅ 测试项目功能
- ✅ 准备数据和配置文件
- ✅ 创建详细使用指南文档

## 创建的文档
- **InstantSplat_使用指南.md**: 详细的项目使用说明文档，包含:
  - 数据存放位置和格式要求
  - 推理和评估两种使用模式
  - 必需修改的配置参数
  - 输出结果说明
  - 处理流程详解
  - 常见问题解决方案
  - 技术参数说明

## 环境信息

- Python: 3.10.13
- PyTorch: 2.5.1 (CUDA 11.8)
- CUDA: 11.8
- 操作系统: Linux
- 项目路径: `/home/livablecity/InstantSplat`
- conda环境名: `instantsplat`